---
- name: Configure Cloud 1 (root)
  hosts: cloud1
  remote_user: root
  
  # vars_files:
  #   - default.config.yml
  pre_tasks:
    - name: Include playbook configuration.
      include_vars: "{{ item }}"
      with_fileglob:
        - "{{ playbook_dir }}/config.yml"
      tags: ['always']

  roles:
    - {role: github-users, tags: ['ssh-keys']}
    - {role: iancleary.docker, tags: ['docker']}
    - {role: mailserver-provision, tags: ['mailserver-provision']}
    - {role: mailserver-configure, tags: ['mailserver-configure']}

# - name: Configure Cloud 1 (iancleary)
#   hosts: cloud1
#   remote_user: iancleary
  
#   # vars_files:
#   #   - default.config.yml
#   pre_tasks:
#     - name: Include playbook configuration.
#       include_vars: "{{ item }}"
#       with_fileglob:
#         - "{{ playbook_dir }}/config.yml"
#       tags: ['always']

#   roles:
    # - {role: mailserver-provision, tags: ['mailserver-provision'], ansible_become_password: "{{ iancleary_user_password }}"}
    # - {role: mailserver-service, tags: ['mailserver-service']}
    

